<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Learn!</title>

  <!-- Latest compiled and minified CSS & JS -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="styles/styles.css">
  <link
    href="https://fonts.googleapis.com/css?family=Alex+Brush|Fredericka+the+Great|Great+Vibes|Kaushan+Script|Lustria&display=swap"
    rel="stylesheet">


</head>

<body>

  <div class="container">

    <h1>Learn!</h1>

    <hr>

    <h2>Sign up for a <span class="selectedCategory">[category selected]</span> class happening in your neighborhood.
    </h2>

    <div class="AppDescriptionContainer">
      <p>Insert instructions for how to sign up for a class.
      </p>
    </div>

    <hr>

    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <ul id="selectedCategoryResults" class="list-group">
              <!-- !!!!!!!!!! delete this mock result -->
              <li class='ClassInSelectedCategory'>
                <h1>Class: Spoon carving</h2>
                  <p><strong>Taught by:</strong> Luke Garrison</p>
                  <p><strong>Location:</strong> 124 Bolinas Road, Fairfax, CA 94930</p>
                  <p><strong>Date:</strong> Wednesday, June 12th, 2019</p>
                  <p><strong>Time:</strong> 2:30PM - 5:30PM</p>
                  <p><strong>Description:</strong> Wooden blanks and carving tools provided. Beginners welcome. come
                    learn how to carve a wooden spoon, how to oil and finish the spoon, and how to take care of your new
                    spoon. </p>

              </li>
              <li class='ClassInSelectedCategory'>
                <h1>Class: Wooden heart pendants</h2>
                  <p><strong>Taught by:</strong> Hetty Chin</p>
                  <p><strong>Location:</strong> 124 Bolinas Road, Fairfax, CA 94930</p>
                  <p><strong>Date:</strong> Wednesday, June 12th, 2019</p>
                  <p><strong>Time:</strong> 2:30PM - 5:30PM</p>
                  <p><strong>Description:</strong> Wooden blanks and carving tools provided. Beginners welcome. come
                    learn how to carve a wooden spoon, how to oil and finish the spoon, and how to take care of your new
                    spoon. </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <hr>

    <div class="AppDescriptionContainer">
      <p>Search for different type of class.
      </p>
    </div>

    <div class="classCategoriesContainer">
      <button type="button" class="btn btn-lg btn-success categoryButton">
        <h4>Soap making</h4>
      </button>
      <button type="button" class="btn btn-lg btn-success categoryButton">
        <h4>Spoon carving</h4>
      </button>
      <button type="button" class="btn btn-lg btn-success categoryButton">
        <h4>Knitting</h4>
      </button>
      <button type="button" class="btn btn-lg btn-success categoryButton">
        <h4>Yoga</h4>
      </button>
      <button type="button" class="btn btn-lg btn-success categoryButton">
        <h4>Painting</h4>
      </button>
    </div>

    <hr>

    <div class="AppDescriptionContainer">
      <p>Host a class of your own!</p>
    </div>

    <div class="teachButtonContainer">
      <a href="/survey"><button type="button" class="btn btn-lg btn-success teachButton">
          <h4>Teach</h4>
        </button></a>
    </div>
    
    <!-- Modal -->
    <div id="results-modal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h2 class="modal-title"><strong>Best Match</strong></h2>
          </div>
          <div class="modal-body">
            <h2 id="match-name"></h2>
            <img id="match-img" style="max-width: 500px">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>


    <!-- !!!!!!!!!! boilerplate script for appending results // pulled and from Starwars activity and modified-->
    <script type="text/javascript">

      $.get("/api/characters", function (data) {
        for (var i = 0; i < data.length; i++) {
          console.log(data[i]);
          var listClassesInSelectedCategory = $("<li class='ClassInSelectedCategory'>");

          listClassesInSelectedCategory.append("<h2>Class:" + data[i].title);
          ListClassesInSelectedCategory.append("<p><strong>Taught by:<strong> " + data[i].teacher);
          ListClassesInSelectedCategory.append("<p><strong>Location:<strong> " + data[i].location);
          ListClassesInSelectedCategory.append("<p><strong>Date:<strong> " + data[i].date);
          ListClassesInSelectedCategory.append("<p><strong>Time:<strong> " + data[i].time);
          ListClassesInSelectedCategory.append("<p><strong>Description:<strong> " + data[i].description);

          $("#character-section").append(ListClassesInSelectedCategory);
        }
      });
      // !!!!!!!!!! end boiler plate pulled from starwars
      // !!!!!!!!!! boiler plate modal code pulled from friend finder
      // Chosen CSS
      var config = {
        ".chosen-select": {},
        ".chosen-select-deselect": {
          allow_single_deselect: true
        },
        ".chosen-select-no-single": {
          disable_search_threshold: 10
        },
        ".chosen-select-no-results": {
          no_results_text: "Oops, nothing found!"
        },
        ".chosen-select-width": {
          width: "95%"
        }
      };

      for (var selector in config) {
        $(selector).chosen(config[selector]);
      }

      // Capture the form inputs
      $("#submit").on("click", function (event) {
        event.preventDefault();

        // Form validation
        function validateForm() {
          var isValid = true;
          $(".form-control").each(function () {
            if ($(this).val() === "") {
              isValid = false;
            }
          });

          $(".chosen-select").each(function () {

            if ($(this).val() === "") {
              isValid = false;
            }
          });
          return isValid;
        }

        // If all required fields are filled
        if (validateForm()) {
          // Create an object for the user's data
          var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [
              parseInt($("#q1").val()),
              parseInt($("#q2").val()),
              parseInt($("#q3").val()),
              parseInt($("#q4").val()),
              parseInt($("#q5").val()),
              parseInt($("#q6").val()),
              parseInt($("#q7").val()),
              parseInt($("#q8").val()),
              parseInt($("#q9").val()),
              parseInt($("#q10").val())
            ]

          };

          // AJAX post the data to the friends API.
          $.post("/api/friends", userData, function (data) {

            // Grab the result from the AJAX post so that the best match's name and photo are displayed.
            $("#match-name").text(data.name);
            $("#match-img").attr("src", data.photo);

            // Show the modal with the best match
            $("#results-modal").modal("toggle");

          });

          // reset all the fields
          $("#name, #photo").val("");
          $("#q1_chosen span, #q2_chosen span, #q3_chosen span, #q4_chosen span, #q5_chosen span, #q6_chosen span, #q7_chosen span, #q8_chosen span, #q9_chosen span, #q10_chosen span").text("Select an Option");
        } else {
          alert("Please fill out all fields before submitting!");
        }
      });
    // !!!!!!!!!! end boiler plate for modal
    </script>
    <!-- 
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/hetty-chin/FriendFinder"
                        target="_blank">GitHub Repo</a></p>
            </div>
        </footer> -->

  </div>


</body>

</html>